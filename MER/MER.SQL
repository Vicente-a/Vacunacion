
CREATE SEQUENCE VCNN.catalogo_id_seq;

CREATE TABLE VCNN.CATALOGO (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.catalogo_id_seq'),
                DESCRIPCION VARCHAR(100) NOT NULL,
                ESTADO SMALLINT NOT NULL,
                CONSTRAINT catalogo_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.catalogo_id_seq OWNED BY VCNN.CATALOGO.ID;

CREATE SEQUENCE VCNN.detallecatalogo_id_seq;

CREATE TABLE VCNN.DETALLECATALOGO (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.detallecatalogo_id_seq'),
                CATALOGO_ID INTEGER NOT NULL,
                DESCRIPCION VARCHAR(100) NOT NULL,
                DETALLECATALOGO_ID INTEGER,
                VALOR VARCHAR(10),
                ESTADO SMALLINT NOT NULL,
                CONSTRAINT detallecatalogo_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.detallecatalogo_id_seq OWNED BY VCNN.DETALLECATALOGO.ID;

CREATE SEQUENCE VCNN.usuario_id_seq;

CREATE TABLE VCNN.USUARIO (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.usuario_id_seq'),
                IDENTIFICACION VARCHAR(15) NOT NULL,
                NOMBRES VARCHAR(100) NOT NULL,
                APELLIDOS VARCHAR(100) NOT NULL,
                LOGIN VARCHAR(13),
                PASSWORD VARCHAR(200),
                FECHAINGRESO TIMESTAMP NOT NULL,
                ESTADO SMALLINT NOT NULL,
                CONSTRAINT usuario_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.usuario_id_seq OWNED BY VCNN.USUARIO.ID;

CREATE SEQUENCE VCNN.vacuna_id_seq;

CREATE TABLE VCNN.VACUNA (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.vacuna_id_seq'),
                CTVACUNA_ID INTEGER NOT NULL,
                DOSIS INTEGER NOT NULL,
                FECHAINGRESO DATE NOT NULL,
                CANTIDAD INTEGER NOT NULL,
                SALDO INTEGER NOT NULL,
                USUARIO_ID INTEGER NOT NULL,
                ESTADO SMALLINT NOT NULL,
                CONSTRAINT vacuna_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.vacuna_id_seq OWNED BY VCNN.VACUNA.ID;

CREATE SEQUENCE VCNN.perfil_id_seq;

CREATE TABLE VCNN.PERFIL (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.perfil_id_seq'),
                DESCRIPCION VARCHAR(50) NOT NULL,
                ESTADO SMALLINT NOT NULL,
                CONSTRAINT perfil_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.perfil_id_seq OWNED BY VCNN.PERFIL.ID;

CREATE SEQUENCE VCNN.usuarioperfil_id_seq;

CREATE TABLE VCNN.USUARIOPERFIL (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.usuarioperfil_id_seq'),
                PERFIL_ID INTEGER NOT NULL,
                USUARIO_ID INTEGER NOT NULL,
                CONSTRAINT usuarioperfil_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.usuarioperfil_id_seq OWNED BY VCNN.USUARIOPERFIL.ID;

CREATE SEQUENCE VCNN.ciudadano_id_seq;

CREATE TABLE VCNN.CIUDADANO (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.ciudadano_id_seq'),
                CEDULA VARCHAR(15) NOT NULL,
                APELLIDOS VARCHAR(100) NOT NULL,
                NOMBRES VARCHAR(100) NOT NULL,
                FECHANACIMIENTO DATE NOT NULL,
                CORREO VARCHAR(100),
                TELEFONO VARCHAR(20),
                CTPAIS_ID INTEGER NOT NULL,
                CTPROVINCIA_ID INTEGER NOT NULL,
                CTCANTON_ID INTEGER NOT NULL,
                CTSECTOR_ID INTEGER NOT NULL,
                FECHAINGRESO TIMESTAMP NOT NULL,
                ESTADO SMALLINT NOT NULL,
                CONSTRAINT ciudadano_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.ciudadano_id_seq OWNED BY VCNN.CIUDADANO.ID;

CREATE SEQUENCE VCNN.consulta_id_seq;

CREATE TABLE VCNN.CONSULTA (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.consulta_id_seq'),
                FECHAINGRESO TIMESTAMP NOT NULL,
                CIUDADANO_ID INTEGER NOT NULL,
                USUARIO_ID INTEGER NOT NULL,
                VACUNA_ID INTEGER NOT NULL,
                DOSIS INTEGER NOT NULL,
                CONSTRAINT consulta_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.consulta_id_seq OWNED BY VCNN.CONSULTA.ID;

CREATE SEQUENCE VCNN.detallevacuna_id_seq;

CREATE TABLE VCNN.DETALLEVACUNA (
                ID INTEGER NOT NULL DEFAULT nextval('VCNN.detallevacuna_id_seq'),
                VACUNA_ID INTEGER NOT NULL,
                CONSULTA_ID INTEGER,
                CANTIDAD INTEGER NOT NULL,
                CTTIPOMOVIMIENTO_ID INTEGER NOT NULL,
                CONSTRAINT detallevacuna_id PRIMARY KEY (ID)
);


ALTER SEQUENCE VCNN.detallevacuna_id_seq OWNED BY VCNN.DETALLEVACUNA.ID;

ALTER TABLE VCNN.DETALLECATALOGO ADD CONSTRAINT catalogo_detallecatalogo_fk
FOREIGN KEY (CATALOGO_ID)
REFERENCES VCNN.CATALOGO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.VACUNA ADD CONSTRAINT detallecatalogo_vacuna_fk
FOREIGN KEY (CTVACUNA_ID)
REFERENCES VCNN.DETALLECATALOGO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.CIUDADANO ADD CONSTRAINT detallecatalogo_ciudadano_fk
FOREIGN KEY (CTPAIS_ID)
REFERENCES VCNN.DETALLECATALOGO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.CIUDADANO ADD CONSTRAINT detallecatalogo_ciudadano_fk1
FOREIGN KEY (CTPROVINCIA_ID)
REFERENCES VCNN.DETALLECATALOGO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.CIUDADANO ADD CONSTRAINT detallecatalogo_ciudadano_fk2
FOREIGN KEY (CTCANTON_ID)
REFERENCES VCNN.DETALLECATALOGO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.CIUDADANO ADD CONSTRAINT detallecatalogo_ciudadano_fk3
FOREIGN KEY (CTSECTOR_ID)
REFERENCES VCNN.DETALLECATALOGO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.DETALLEVACUNA ADD CONSTRAINT detallecatalogo_detallevacuna_fk
FOREIGN KEY (CTTIPOMOVIMIENTO_ID)
REFERENCES VCNN.DETALLECATALOGO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.USUARIOPERFIL ADD CONSTRAINT usuario_usuarioperfil_fk
FOREIGN KEY (USUARIO_ID)
REFERENCES VCNN.USUARIO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.CONSULTA ADD CONSTRAINT usuario_consulta_fk
FOREIGN KEY (USUARIO_ID)
REFERENCES VCNN.USUARIO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.VACUNA ADD CONSTRAINT usuario_vacuna_fk
FOREIGN KEY (USUARIO_ID)
REFERENCES VCNN.USUARIO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.CONSULTA ADD CONSTRAINT vacuna_consulta_fk
FOREIGN KEY (VACUNA_ID)
REFERENCES VCNN.VACUNA (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.DETALLEVACUNA ADD CONSTRAINT vacuna_detallevacuna_fk
FOREIGN KEY (VACUNA_ID)
REFERENCES VCNN.VACUNA (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.USUARIOPERFIL ADD CONSTRAINT perfil_usuarioperfil_fk
FOREIGN KEY (PERFIL_ID)
REFERENCES VCNN.PERFIL (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.CONSULTA ADD CONSTRAINT ciudadano_consulta_fk
FOREIGN KEY (CIUDADANO_ID)
REFERENCES VCNN.CIUDADANO (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE VCNN.DETALLEVACUNA ADD CONSTRAINT consulta_detallevacuna_fk
FOREIGN KEY (CONSULTA_ID)
REFERENCES VCNN.CONSULTA (ID)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;
